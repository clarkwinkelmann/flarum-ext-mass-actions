{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@clarkwinkelmann/mass-actions/./src/forum/addDiscussionActions.ts","webpack://@clarkwinkelmann/mass-actions/./src/forum/addDiscussionControls.ts","webpack://@clarkwinkelmann/mass-actions/./src/forum/components/Checkbox.ts","webpack://@clarkwinkelmann/mass-actions/./src/forum/components/IconButton.ts","webpack://@clarkwinkelmann/mass-actions/./src/forum/index.ts","webpack://@clarkwinkelmann/mass-actions/./src/forum/patchCoreComponents.ts","webpack://@clarkwinkelmann/mass-actions/./src/forum/utils/SelectState.ts","webpack://@clarkwinkelmann/mass-actions/./src/forum/utils/proxyModels.ts","webpack://@clarkwinkelmann/mass-actions/external root \"flarum.core.compat['common/Component']\"","webpack://@clarkwinkelmann/mass-actions/external root \"flarum.core.compat['common/components/Button']\"","webpack://@clarkwinkelmann/mass-actions/external root \"flarum.core.compat['common/components/Dropdown']\"","webpack://@clarkwinkelmann/mass-actions/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@clarkwinkelmann/mass-actions/external root \"flarum.core.compat['common/extend']\"","webpack://@clarkwinkelmann/mass-actions/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@clarkwinkelmann/mass-actions/external root \"flarum.core.compat['common/helpers/listItems']\"","webpack://@clarkwinkelmann/mass-actions/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@clarkwinkelmann/mass-actions/external root \"flarum.core.compat['forum/app']\"","webpack://@clarkwinkelmann/mass-actions/external root \"flarum.core.compat['forum/components/DiscussionListItem']\"","webpack://@clarkwinkelmann/mass-actions/external root \"flarum.core.compat['forum/components/IndexPage']\"","webpack://@clarkwinkelmann/mass-actions/external root \"flarum.core.compat['forum/utils/DiscussionControls']\"","webpack://@clarkwinkelmann/mass-actions/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@clarkwinkelmann/mass-actions/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@clarkwinkelmann/mass-actions/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@clarkwinkelmann/mass-actions/webpack/bootstrap","webpack://@clarkwinkelmann/mass-actions/webpack/runtime/compat get default export","webpack://@clarkwinkelmann/mass-actions/webpack/runtime/define property getters","webpack://@clarkwinkelmann/mass-actions/webpack/runtime/hasOwnProperty shorthand","webpack://@clarkwinkelmann/mass-actions/webpack/runtime/make namespace object"],"sourcesContent":["import {extend} from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport Button from 'flarum/common/components/Button';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport DiscussionControls from 'flarum/forum/utils/DiscussionControls';\nimport proxyModels from './utils/proxyModels';\nimport IconButton from './components/IconButton';\n\nexport default function () {\n    extend(IndexPage.prototype, 'actionItems', function (items) {\n        const select = app.current.get('mass-select');\n        if (!select || select.count() === 0) {\n            return;\n        }\n\n        // Remove global actions\n        items.remove('refresh');\n        items.remove('markAllAsRead');\n\n        items.add('mass-markAsRead', m(IconButton, {\n            title: app.translator.trans('clarkwinkelmann-mass-actions.forum.actions.markAsRead'),\n            icon: 'fas fa-check',\n            onclick() {\n                select.forEachPromise(discussion => {\n                    // Same code as in DiscussionListItem\n                    if (discussion.isUnread()) {\n                        return discussion.save({lastReadPostNumber: discussion.lastPostNumber()});\n                    }\n\n                    return Promise.resolve();\n                }).then(() => {\n                    m.redraw();\n                });\n            },\n        }));\n\n        if (app.forum.attribute('canHideDiscussionsSometime')) {\n            const anyHidden = select.some(discussion => {\n                return discussion.isHidden();\n            });\n\n            items.add('mass-hide', m(IconButton, {\n                title: anyHidden ? app.translator.trans('clarkwinkelmann-mass-actions.forum.actions.restore') : app.translator.trans('clarkwinkelmann-mass-actions.forum.actions.hide'),\n                icon: anyHidden ? 'fas fa-reply' : 'fas fa-trash-alt',\n                onclick() {\n                    select.forEachPromise(discussion => {\n                        if (!discussion.canHide()) {\n                            return Promise.resolve();\n                        }\n\n                        if (anyHidden) {\n                            return DiscussionControls.restoreAction.call(discussion);\n                        } else {\n                            return DiscussionControls.hideAction.call(discussion);\n                        }\n                    }).then(() => {\n                        m.redraw();\n                    });\n                },\n                disabled: !select.some(discussion => {\n                    return discussion.canHide();\n                }),\n            }));\n        }\n\n        if (app.forum.attribute('canLockDiscussionsSometime')) {\n            const anyLocked = select.some(discussion => {\n                return discussion.attribute('isLocked');\n            });\n\n            items.add('mass-lock', m(IconButton, {\n                title: anyLocked ? app.translator.trans('clarkwinkelmann-mass-actions.forum.actions.unlock') : app.translator.trans('clarkwinkelmann-mass-actions.forum.actions.lock'),\n                icon: anyLocked ? 'fas fa-unlock' : 'fas fa-lock',\n                onclick() {\n                    select.forEachPromise(discussion => {\n                        if (!discussion.attribute('canLock')) {\n                            return Promise.resolve();\n                        }\n\n                        // Re-implement DiscussionControls.lockAction to force lock or unlock instead of toggling\n                        return discussion.save({isLocked: !anyLocked});\n                    }).then(() => {\n                        m.redraw();\n                    });\n                },\n                disabled: !select.some(discussion => {\n                    return discussion.attribute('canLock');\n                }),\n            }));\n        }\n\n        if (app.forum.attribute('canTagDiscussionsSometime')) {\n            items.add('mass-tags', Dropdown.component({\n                buttonClassName: 'Button',\n                label: app.translator.trans('clarkwinkelmann-mass-actions.forum.actions.tags'),\n                disabled: !select.some(discussion => {\n                    return discussion.attribute('canTag');\n                }),\n            }, [\n                Button.component({\n                    onclick() {\n                        app.modal.show(flarum.core.compat['tags/forum/components/TagDiscussionModal'], {\n                            discussion: proxyModels(select.all()),\n                        });\n                    },\n                }, app.translator.trans('clarkwinkelmann-mass-actions.forum.actions.tags-edit')),\n                app.store.all('tags').map(tag => Button.component({\n                    onclick() {\n                        select.forEachPromise(discussion => {\n                            if (!discussion.attribute('canTag')) {\n                                return Promise.resolve();\n                            }\n\n                            const tags = discussion.tags() || [];\n\n                            // If discussion already has this tag, skip\n                            if (tags.some(thisTag => thisTag.id() === tag.id())) {\n                                return Promise.resolve();\n                            }\n\n                            tags.push(tag);\n\n                            return discussion.save({relationships: {tags}})\n                        }).then(() => {\n                            m.redraw();\n                        });\n                    },\n                }, app.translator.trans('clarkwinkelmann-mass-actions.forum.actions.tags-add', {\n                    tag: tag.name(),\n                }))),\n            ]));\n        }\n    });\n}\n","import {extend} from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport IndexPage from 'flarum/forum/components/IndexPage';\nimport DiscussionListItem from 'flarum/forum/components/DiscussionListItem';\nimport Button from 'flarum/common/components/Button';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport icon from 'flarum/common/helpers/icon';\nimport listItems from 'flarum/common/helpers/listItems';\nimport Checkbox from './components/Checkbox';\nimport SelectState from './utils/SelectState';\n\nfunction selectAllDiscussions() {\n    app.discussions.getPages().forEach(page => {\n        page.items.forEach(discussion => {\n            app.current.get('mass-select')!.add(discussion);\n        });\n    });\n}\n\nexport default function () {\n    extend(IndexPage.prototype, 'viewItems', function (items) {\n        if (!app.forum.attribute('massControls')) {\n            return;\n        }\n\n        const controls = new ItemList();\n\n        let iconName = 'far fa-square';\n        const count = app.current.get('mass-select')!.count();\n\n        if (count > 0) {\n            if (count === app.discussions.getPages().reduce((total, page) => total + page.items.length, 0)) {\n                iconName = 'fas fa-check-square';\n            } else {\n                iconName = 'fas fa-minus-square';\n            }\n        }\n\n        controls.add('all', Button.component({\n            onclick() {\n                selectAllDiscussions();\n            },\n        }, app.translator.trans('clarkwinkelmann-mass-actions.forum.select.all')));\n\n        controls.add('clear', Button.component({\n            onclick() {\n                app.current.get('mass-select')!.clear();\n            },\n        }, app.translator.trans('clarkwinkelmann-mass-actions.forum.select.none')));\n\n        // We don't use Flarum's SplitDropdown because the children of the first button aren't redrawing properly\n        items.add('mass-select', m('.ButtonGroup.Dropdown.Dropdown--split.dropdown', {}, [\n            Button.component({\n                className: 'Button SplitDropdown-button MassSelectControl' + (count > 0 ? ' checked' : ''),\n                onclick() {\n                    if (app.current.get('mass-select')!.count() === 0) {\n                        selectAllDiscussions();\n                    } else {\n                        app.current.get('mass-select')!.clear();\n                    }\n                },\n            }, icon(iconName)),\n            m('button.Dropdown-toggle.Button.Button--icon', {\n                'data-toggle': 'dropdown',\n            }, icon('fas fa-caret-down', {className: 'Button-caret'})),\n            m('ul.Dropdown-menu.dropdown-menu', listItems(controls.toArray())),\n        ]), 100);\n    });\n\n    extend(DiscussionListItem.prototype, 'view', function (vdom) {\n        // Only add the checkboxes on the index page, not the drawer\n        if (!app.current.matches(IndexPage) || !app.forum.attribute('massControls')) {\n            return;\n        }\n\n        vdom.children.forEach(vdom => {\n            if (vdom && vdom.attrs && vdom.attrs.className && vdom.attrs.className.indexOf('DiscussionListItem-content') !== -1) {\n                const state = app.current.get('mass-select')!;\n\n                vdom.children.unshift(m('.DiscussionListItem-select', Checkbox.component({\n                    state: state.contains(this.attrs.discussion),\n                    onchange: () => {\n                        state.toggle(this.attrs.discussion);\n                    },\n                })));\n            }\n        });\n    });\n\n    extend(DiscussionListItem.prototype, 'oninit', function () {\n        this.subtree!.check(() => app.current.get('mass-select')?.contains(this.attrs.discussion));\n    });\n\n    extend(DiscussionListItem.prototype, 'elementAttrs', function (attrs) {\n        if (app.current.get('mass-select')?.contains(this.attrs.discussion)) {\n            attrs.className += ' DiscussionListItem--selected';\n        }\n    });\n\n    extend(IndexPage.prototype, 'oninit', function () {\n        app.current.set('mass-select', new SelectState('discussions'));\n    });\n}\n","import Component, {ComponentAttrs} from 'flarum/common/Component';\nimport icon from 'flarum/common/helpers/icon';\n\ninterface CheckboxAttrs extends ComponentAttrs {\n    state: boolean\n    onchange: () => void,\n}\n\nexport default class Checkbox extends Component<CheckboxAttrs> {\n    view() {\n        return m('.MassSelectControl', {\n            className: this.attrs.state ? 'checked' : '',\n            role: 'checkbox',\n            onclick: this.attrs.onchange,\n        }, icon(this.attrs.state ? 'fas fa-check-square' : 'far fa-square'));\n    }\n}\n","import {ClassComponent, Vnode} from 'mithril';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport Button from 'flarum/common/components/Button';\n\ninterface IconButtonAttrs {\n    title: any\n    icon: string\n    onclick: () => void\n    disabled?: boolean\n}\n\n/**\n * Since every one of our buttons will need a tooltip and same class name, a re-usable component makes sense\n * Particularly because the title text needs to be injected in 2 places\n */\nexport default class IconButton implements ClassComponent<IconButtonAttrs> {\n    view(vnode: Vnode<IconButtonAttrs, this>) {\n        return Tooltip.component({\n            text: vnode.attrs.title,\n        }, Button.component({\n            'aria-label': vnode.attrs.title,\n            icon: vnode.attrs.icon,\n            className: 'Button Button--icon',\n            onclick: vnode.attrs.onclick,\n            disabled: vnode.attrs.disabled,\n        }));\n    }\n}\n","import app from 'flarum/forum/app';\nimport patchCoreComponents from './patchCoreComponents';\nimport addDiscussionControls from './addDiscussionControls';\nimport addDiscussionActions from './addDiscussionActions';\n\napp.initializers.add('mass-actions', () => {\n    patchCoreComponents();\n    addDiscussionControls();\n    addDiscussionActions();\n});\n","import {extend} from 'flarum/common/extend';\nimport Dropdown from 'flarum/common/components/Dropdown';\n\nexport default function () {\n    // Flarum's Dropdown component doesn't support disabled state out of the box\n    extend(Dropdown.prototype, 'getButton', function (vnode) {\n        // @ts-ignore\n        vnode.attrs.disabled = this.attrs.disabled;\n    });\n}\n","import Model from 'flarum/common/Model';\nimport app from 'flarum/forum/app';\n\nexport default class SelectState {\n    type: string\n    ids: string[] = []\n\n    constructor(type: string) {\n        this.type = type;\n    }\n\n    private indexOf(model: Model) {\n        return this.ids.indexOf(model.id() || '');\n    }\n\n    contains(model: Model): boolean {\n        return this.indexOf(model) !== -1;\n    }\n\n    toggle(model: Model): void {\n        if (!model.id()) {\n            throw 'Missing ID in model';\n        }\n\n        const index = this.indexOf(model);\n\n        if (index === -1) {\n            this.ids.push(model.id()!);\n        } else {\n            this.ids.splice(index, 1);\n        }\n    }\n\n    add(model: Model): void {\n        if (!model.id()) {\n            throw 'Missing ID in model';\n        }\n\n        if (!this.contains(model)) {\n            this.ids.push(model.id()!);\n        }\n    }\n\n    clear(): void {\n        this.ids = [];\n    }\n\n    count(): number {\n        return this.ids.length;\n    }\n\n    private callbackWithModel<T = void>(callback: (model: Model) => T): (id: string) => T {\n        return (id: string) => {\n            return callback(app.store.getById(this.type, id)!);\n        }\n    }\n\n    forEach(callback: (model: Model) => void): void {\n        this.ids.forEach(this.callbackWithModel(callback));\n    }\n\n    forEachPromise(callback: (model: Model) => Promise<any>): Promise<any> {\n        return Promise.all(this.ids.map(this.callbackWithModel(callback)));\n    }\n\n    some(callback: (model: Model) => boolean): boolean {\n        return this.ids.some(this.callbackWithModel<boolean>(callback));\n    }\n\n    all(): Model[] {\n        return this.ids.map(id => app.store.getById(this.type, id)!);\n    }\n}\n","import Model from 'flarum/common/Model';\n\nexport default function proxyModels(models: Model[]) {\n    return new Proxy(models[0], {\n        get(target, prop, receiver) {\n            if (prop === 'save') {\n                return (attributes: any, options = {}) => {\n                    return Promise.all(models.map(model => model.save({...attributes}, {...options})));\n                };\n            }\n\n            return Reflect.get(target, prop, receiver);\n        },\n    });\n}\n","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Dropdown'];","module.exports = flarum.core.compat['common/components/Tooltip'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/helpers/listItems'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['forum/app'];","module.exports = flarum.core.compat['forum/components/DiscussionListItem'];","module.exports = flarum.core.compat['forum/components/IndexPage'];","module.exports = flarum.core.compat['forum/utils/DiscussionControls'];","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"names":["extend","app","IndexPage","Button","Dropdown","DiscussionControls","proxyModels","IconButton","prototype","items","select","current","get","count","remove","add","m","title","translator","trans","icon","onclick","forEachPromise","discussion","isUnread","save","lastReadPostNumber","lastPostNumber","Promise","resolve","then","redraw","forum","attribute","anyHidden","some","isHidden","canHide","restoreAction","call","hideAction","disabled","anyLocked","isLocked","component","buttonClassName","label","modal","show","flarum","core","compat","all","store","map","tag","tags","thisTag","id","push","relationships","name","DiscussionListItem","ItemList","listItems","Checkbox","SelectState","selectAllDiscussions","discussions","getPages","forEach","page","controls","iconName","reduce","total","length","clear","className","toArray","vdom","matches","children","attrs","indexOf","state","unshift","contains","onchange","toggle","subtree","check","set","Component","view","role","Tooltip","vnode","text","patchCoreComponents","addDiscussionControls","addDiscussionActions","initializers","type","ids","model","index","splice","callbackWithModel","callback","getById","models","Proxy","target","prop","receiver","attributes","options","Reflect","_extends","Object","assign","i","arguments","source","key","hasOwnProperty","apply","setPrototypeOf","_inheritsLoose","subClass","superClass","create","constructor","_setPrototypeOf","o","p","__proto__"],"sourceRoot":""}